<!--<%= render partial: 'charges/new'%>-->

<div class="modal fade" id="sponsorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">

<% if person_signed_in? %>

  <% if @tournament.sponsorships != [] %>

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Become a Sponsor</h4>
      </div>
      <div class="modal-body text-justify">
        <div class="row">
          <div class="col-md-6 col-md-offset-3">
          <%= form_for :sponsor, url: {:controller =>'sponsors', :action => 'create'}, method:'post' do |f| %>

            <%= f.label :'sponsorshipType'%><text class='text-danger'>*</text>
            <div >
             <%= f.select :sponsorship_id, options_for_select(@tournament.sponsorships.collect { |item| [item.name + ' $' + (item.price).to_s, item.id]}.sort.insert(0,""), 0), {}, {id: "sponsor_sponsorship_id"}%>
            </div>

            <%= f.label :'Website URL', class: 'text-justify'%>
            <%= f.text_field(:websiteURL, :placeholder => 'www.GOLF.com',class: 'form-control') %>


            <%= f.label :'@Twitter' %>
            <%= f.text_field(:twitterLink, :placeholder => '@cl0ud9Twitter',class: 'form-control') %>

            <%= f.label :'Facebook' %>
            <%= f.text_field(:fbLink, :placeholder => 'facebook.com/cl0ud9',class: 'form-control') %>

            <%= f.label :'Snapchat' %>
            <%= f.text_field(:snapchatHandle, :placeholder => 'cl0ud9Snapchat',class: 'form-control') %>


            <%= f.hidden_field :person_id, :value => current_person.id %>
            <%= f.hidden_field :tournament_id, :value => @tournament.id %>

            <div class="modal-footer">
              <!--empty now for spacing purposes-->
            </div>

            <!-- TODO: Gotta also not allow this continue if not paid -->
            <!-- if success -->
            <%= f.submit 'Proceed to Payment', class: 'btn btn-primary', id: 'add_sponsor_btn'%>
            <!-- else-->
            <!--payment failed error-->
            <% end %>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <!--empty now for spacing purposes-->
      </div>

    </div>

    <% else %>
    <div class="modal-content panel-danger">
      <div class="modal-header panel-heading">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">ERROR</h4>
       </div>
       <div class="modal-body">
        <h3>
          There are no sponsorships available for this tournament
        </h3>
       </div>
       <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Okay</button>
       </div>
     </div>

    <% end %>

<% else %>

    <div class="modal-content panel-danger">
      <div class="modal-header panel-heading">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">ERROR</h4>
        </div>
        <div class="modal-body">
          <h3>
          You must be signed in to become a Sponsor of this tournament
          </h3>
        </div>
        <div class="modal-footer">
            <a href=<%=new_person_session_path %>="button" class="btn btn-primary data-toggle="modal">Log In</a>
            <a href=<%=new_person_registration_path %>="button" class="btn btn-primary" data-toggle="modal">Sign Up</a>
            <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
          </div>
      </div>

  <% end %>

  </div>
</div>
<script
			  src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
			  integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc="
			  crossorigin="anonymous"></script>
<script>
$('#sponsor_sponsorshipType').on('change', function() {
  console.log("Changed" ); // or $(this).val()
});
</script>
